{"version":3,"sources":["circle/views.cljs"],"mappings":"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","names":["circle.views/get-click-coordinates","e","xy","circle.views/build-circle","ci","cljs.core.assoc","cljs.core/rand-nth","cljs.core.range","re-frame.core/dispatch","circle.views/add-circle","circle.views/undo-button","undos?","re_frame.core.subscribe","cljs.core/deref","cljs.core/not","circle.views/redo-button","redos?","circle.views/main-panel","circle.modal/modal","iter__4652__auto__","s__29090","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4650__auto__","size__4651__auto__","cljs.core/count","b__29092","cljs.core/chunk-buffer","i__29091","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__29089","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","circle","cljs.core/chunk-first"],"sourcesContent":["(ns circle.views\n  (:require\n    [circle.modal :refer [modal]]\n    [circle.subs :as subs]\n    [re-frame.core :as re-frame]))\n\n\n(defn get-click-coordinates\n  [e]\n  (let [xy {:x (- e.clientX e.target.offsetLeft)\n            :y (- e.clientY e.target.offsetTop)}]\n    xy))\n\n\n(defn build-circle\n  [xy]\n  (let [ci (assoc xy :d (rand-nth (range 10 30)))]\n    (re-frame/dispatch [:add-circle ci])))\n\n\n(defn add-circle\n  [e]\n  (build-circle (get-click-coordinates e)))\n\n\n(defn undo-button\n  []\n  (let [undos? (re-frame/subscribe [:undos?])]\n    (fn []\n      [:input {:type     \"button\"\n               :value    \"Undo\"\n               :class    \"btn\"\n               :disabled (not @undos?)\n               :on-click #(re-frame/dispatch [:undo])}])))\n\n\n(defn redo-button\n  []\n  (let [redos? (re-frame/subscribe [:redos?])]\n    (fn []\n      [:input {:type     \"button\"\n               :value    \"Redo\"\n               :class    \"btn\"\n               :disabled (not @redos?)\n               :on-click #(re-frame/dispatch [:redo])}])))\n\n\n(defn main-panel\n  []\n  [:div\n   [modal]\n   [:div.circle-draw\n    [:div.action-menu\n     [undo-button]\n     [redo-button]]\n    [:div.ci-container {:on-click add-circle}\n     (for [circle @(re-frame/subscribe [:get-circles])]\n       ^{:key circle} [:div.circle\n                       {:style           {:left   (:x circle)\n                                          :top    (:y circle)\n                                          :height (* 2 (:d circle))\n                                          :width  (* 2 (:d circle))}\n                        :on-click        (fn [e] (.stopPropagation e)\n                                           (re-frame/dispatch [:set-active-circle circle]))\n                        :on-context-menu (fn [e] (.preventDefault e)\n                                           (re-frame/dispatch [:set-active-circle circle]))}])]]])\n"]}